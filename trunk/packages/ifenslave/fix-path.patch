--- ../../../openwrt_trunk.orig/package/ifenslave/Makefile	2012-09-03 15:55:28.107673584 +0400
+++ ../../../openwrt_trunk/package/ifenslave/Makefile	2012-09-07 17:17:52.317290608 +0400
@@ -6,7 +6,6 @@
 #
 
 include $(TOPDIR)/rules.mk
-include $(INCLUDE_DIR)/kernel.mk
 
 PKG_NAME:=ifenslave
 PKG_RELEASE:=1
@@ -16,7 +15,6 @@
 define Package/ifenslave
   SECTION:=net
   CATEGORY:=Network
-  DEPENDS:=+kmod-bonding
   TITLE:=A utility to manipulate kernel ethernet bonding devices
   VERSION:=$(LINUX_VERSION)-$(PKG_RELEASE)
   URL:=http://www.kernel.org
@@ -30,13 +28,13 @@
 endef
 
 define Build/Compile
-	$(TARGET_CC) $(TARGET_CFLAGS) -o $(PKG_BUILD_DIR)/ifenslave \
+	$(TARGET_CC) $(TARGET_CFLAGS) $(TARGET_LDFLAGS) -o $(PKG_BUILD_DIR)/ifenslave \
 		$(LINUX_DIR)/Documentation/networking/ifenslave.c
 endef
 
 define Package/ifenslave/install
-	$(INSTALL_DIR) $(1)/sbin
-	$(INSTALL_BIN) $(PKG_BUILD_DIR)/ifenslave $(1)/sbin/
+	$(INSTALL_DIR) $(1)/opt/sbin
+	$(INSTALL_BIN) $(PKG_BUILD_DIR)/ifenslave $(1)/opt/sbin/
 endef
 
 $(eval $(call BuildPackage,ifenslave))
