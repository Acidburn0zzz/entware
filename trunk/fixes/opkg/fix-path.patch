diff -r -u -x .svn ../../../backup/trunk_initialized/trunk/package/opkg//files/opkg.conf ../../../trunk/package/opkg//files/opkg.conf
--- ../../../backup/trunk_initialized/trunk/package/opkg//files/opkg.conf	2011-11-10 14:45:07.000000000 +0400
+++ ../../../trunk/package/opkg//files/opkg.conf	2011-11-12 23:01:08.202793214 +0400
@@ -1,5 +1,3 @@
-src/gz snapshots http://downloads.openwrt.org/snapshots/trunk/$S/packages
+src/gz openwrt http://wl500g-repo.googlecode.com/svn/ipkg/openwrt
 dest root /
-dest ram /tmp
-lists_dir ext /var/opkg-lists
-option overlay_root /overlay
+lists_dir ext /opt/var/opkg-lists
diff -r -u -x .svn ../../../backup/trunk_initialized/trunk/package/opkg//Makefile ../../../trunk/package/opkg//Makefile
--- ../../../backup/trunk_initialized/trunk/package/opkg//Makefile	2011-11-10 14:45:08.000000000 +0400
+++ ../../../trunk/package/opkg//Makefile	2011-11-12 23:26:08.245530952 +0400
@@ -42,7 +42,7 @@
 endef
 
 define Package/opkg/conffiles
-/etc/opkg.conf
+/opt/etc/opkg.conf
 endef
 
 TARGET_CFLAGS += $(if $(CONFIG_GCC_VERSION_4_3)$(CONFIG_GCC_VERSION_4_4),-Wno-array-bounds)
@@ -52,8 +52,9 @@
 CONFIGURE_ARGS += \
 	--disable-curl \
 	--disable-gpg \
-	--with-opkgetcdir=/etc \
-	--with-opkglockfile=/var/lock/opkg.lock
+	--with-opkgetcdir=/opt/etc \
+	--with-opkglibdir=/opt/lib \
+	--with-opkglockfile=/opt/var/lock/opkg.lock
 
 define Build/Compile
 	$(MAKE) -C $(PKG_BUILD_DIR) \
@@ -65,32 +66,33 @@
 endef
 
 define Package/opkg/install
-	$(INSTALL_DIR) $(1)/usr/lib/opkg
-	$(INSTALL_DIR) $(1)/bin
-	$(INSTALL_DIR) $(1)/etc
-	$(INSTALL_DATA) ./files/opkg.conf $(1)/etc/
-	$(SED) 's,$$$$S,$(PKGARCH),g' $(1)/etc/opkg.conf
-	$(INSTALL_BIN) $(PKG_INSTALL_DIR)/usr/bin/opkg-cl $(1)/bin/opkg
+	$(INSTALL_DIR) $(1)/opt/lib/opkg
+	$(INSTALL_DIR) $(1)/opt/bin
+	$(INSTALL_DIR) $(1)/opt/etc
+	$(INSTALL_DATA) ./files/opkg.conf $(1)/opt/etc/
+	$(SED) 's,$$$$S,$(PKGARCH),g' $(1)/opt/etc/opkg.conf
+	$(INSTALL_BIN) $(PKG_INSTALL_DIR)/opt/bin/opkg-cl $(1)/opt/bin/opkg
 endef
 
 define Build/InstallDev
-	mkdir -p $(1)/usr/include
-	$(CP) $(PKG_INSTALL_DIR)/usr/include/libopkg $(1)/usr/include/
+	mkdir -p $(1)/opt/include
+	$(CP) $(PKG_INSTALL_DIR)/opt/include/libopkg $(1)/opt/include/
 endef
 
 
 HOST_CONFIGURE_ARGS+= \
 	--disable-curl \
 	--disable-gpg \
-	--with-opkgetcdir=/etc \
-	--with-opkglockfile=/tmp/opkg.lock
+	--with-opkgetcdir=/opt/etc \
+	--with-opkglibdir=/opt/lib \
+	--with-opkglockfile=/opt/tmp/opkg.lock
 
 define Host/Compile
 	$(MAKE) -C $(HOST_BUILD_DIR) CC="$(HOSTCC)" all
 endef
 
 define Host/Install
-	$(INSTALL_BIN) $(HOST_BUILD_DIR)/src/opkg-cl $(STAGING_DIR_HOST)/bin/opkg
+	$(INSTALL_BIN) $(HOST_BUILD_DIR)/src/opkg-cl $(STAGING_DIR_HOST)/opt/bin/opkg
 endef
 
 $(eval $(call BuildPackage,opkg))
